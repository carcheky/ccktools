#!/bin/bash

# CUSTOM CONFIGS
PROMPT='${ret_status} %{$fg[cyan]%}%3~$reset_color%} $(git_prompt_info)'


# LOAD SOURCES
if [[ -d "$HOME/bin" ]]; then
    export PATH="~/bin:$PATH"
fi

if [[ -d "$HOME/.config/composer/vendor/bin" ]]; then
    export PATH="$HOME/.config/composer/vendor/bin:$PATH"
fi


# INCLUDE DRUSH BASH CUSTOMIZATIONS.
if [ -f "$HOME/.drush/drush.bashrc" ] ; then
  source $HOME/.drush/drush.bashrc
fi

source ~/ccktools/.ccktools_aliases
source ~/ccktools/.ccktools_functions
if [ -f "$HOME/ccktools/.ccktools_custom" ]; then
  source ~/ccktools/.ccktools_custom
fi

# FUNCTIONS
ssh_laucher(){
  SERVICE="ssh-agent"
  if pgrep -x "$SERVICE"
  then
      echo "$SERVICE is running yet"
  else
      echo "starting $SERVICE"
      sudo chmod 700 ~/.ssh
      sudo chmod 600  ~/.ssh/*
      sudo chmod 600 ~/.ssh/*.pub
      eval `ssh-agent -s`
      ssh-add -q ~/.ssh/id_rsa_c*

  fi
}

lamp_laucher(){
  SERVICE="apache2"
  if pgrep -x "$SERVICE"
  then
      echo "$SERVICE is running yet"
  else
      echo "starting $SERVICE"
      lamp start
  fi
}

# LOGIC

# if mount | grep /desadrupal > /dev/null; then
#     clear
# else
#     mountdesadrupal
# fi

ssh_laucher 2>/dev/null
lamp_laucher
clear
gosi al