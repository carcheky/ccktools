#!/bin/bash

# LOAD SOURCES

if [[ -d "$HOME/bin" ]]; then
    export PATH="~/bin:$PATH"
fi

if [[ -d "$HOME/.config/composer/vendor/bin" ]]; then
    export PATH="$HOME/.config/composer/vendor/bin:$PATH"
fi


# Include Drush bash customizations.
if [ -f "$HOME/.drush/drush.bashrc" ] ; then
  source $HOME/.drush/drush.bashrc
fi

source ~/ccktools/.ccktools_aliases
source ~/ccktools/.ccktools_functions

# FUNCTIONS

ssh_laucher(){
  SERVICE="ssh-agent"
  if pgrep -x "$SERVICE"
  then
      echo "$SERVICE is running yet"
  else
      echo "starting $SERVICE"
      sudo chmod 700 ~/.ssh
      sudo chmod 600  ~/.ssh/*
      sudo chmod 600 ~/.ssh/*.pub
      eval `ssh-agent -s`
      ssh-add -q ~/.ssh/id_rsa_c*

  fi
}

lamp_laucher(){
  SERVICE="apache2"
  if pgrep -x "$SERVICE"
  then
      echo "$SERVICE is running yet"
  else
      echo "starting $SERVICE"
      lamp start
  fi
}

zsh_customize(){
  local ret_status="%(?:%{$fg_bold[green]%2}➜ :%{$fg_bold[red]%2}➜ )"
  PROMPT='${ret_status} %{$fg[cyan]%}%c%{$reset_color%} $(git_prompt_info)'
  ZSH_THEME_GIT_PROMPT_PREFIX="%{$fg_bold[blue]%}git:(%{$fg[red]%}"
  ZSH_THEME_GIT_PROMPT_SUFFIX="%{$reset_color%} "
  ZSH_THEME_GIT_PROMPT_DIRTY="%{$fg[blue]%}) %{$fg[yellow]%}✗"
  ZSH_THEME_GIT_PROMPT_CLEAN="%{$fg[blue]%})"
}

# LOGIC

ssh_laucher 2>/dev/null
# &>/dev/null
# lamp_laucher
zsh_customize
clear

# if mount | grep /desadrupal > /dev/null; then
#     clear
# else
#     mountdesadrupal
# fi


gosi